<!DOCTYPE html>
<html lang="en-us"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="generator" content="Hugo 0.54.0" />
	
	<link rel="icon" href="/sundevil-f110car/images/logo_cr_website.png">
	
	<title>MPC - Collision Avoidance using Motion Capture | sundevil-f1/10car</title>
	
	
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
	 crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">
	<link href="/sundevil-f110car/css/medium.css" rel="stylesheet">
	<link href="/sundevil-f110car/css/additional.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="https://chaitanyarajasekhar.github.io/sundevil-f110car/">

            
            <img src="/sundevil-f110car/images/logo_cr_website.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/sundevil-f110car/blog">Blog</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/sundevil-f110car/static/imprint">Project</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/sundevil-f110car/">About</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="mainheading">
    <h1 class="sitetitle">sundevil-f1/10car</h1>
    <p class="lead">
         Blog on Autonomous Decentralized Multi-agent Robots. Check out the project page for more information.
    </p>
</div><div class="main-content">
        
        <div class="container">
            <div class="row">
                
                <div class="col-md-2 pl-0"><div class="share">
    <p>Share</p>
    <ul>
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://twitter.com/intent/tweet?text=MPC%20-%20Collision%20Avoidance%20using%20Motion%20Capture&url=https%3a%2f%2fchaitanyarajasekhar.github.io%2fsundevil-f110car%2fblog%2f4_mpc_demo%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;">
        <i class="fab fa-twitter"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://facebook.com/sharer.php?u=https%3a%2f%2fchaitanyarajasekhar.github.io%2fsundevil-f110car%2fblog%2f4_mpc_demo%2f" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
        <i class="fab fa-facebook-f"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://plus.google.com/share?url=https%3a%2f%2fchaitanyarajasekhar.github.io%2fsundevil-f110car%2fblog%2f4_mpc_demo%2f" onclick="window.open(this.href, 'google-share', 'width=550,height=435');return false;">
        <i class="fab fa-google"></i>
        </a>
        </li>

        <li class="ml-1 mr-1">
        <a target="_blank" href="https://www.xing.com/spi/shares/new?url=https%3a%2f%2fchaitanyarajasekhar.github.io%2fsundevil-f110car%2fblog%2f4_mpc_demo%2f" onclick="window.open(this.href, 'xing-share', 'width=550,height=435');return false;">
        <i class="fab fa-xing"></i>
        </a>
        </li>        
    </ul>

    
</div></div>
                                
                <div class="col-md-9 flex-first flex-md-unordered">
                    <div class="mainheading">
                        	
                        
                        
                        
                        <div class="post-top-meta">
                            <div>
                                <img class="author-thumb" src="/sundevil-f110car/images/author.jpg" alt="Chaitanya Rajasekhar">
                            </div>
                            <div >
                                <a target="_blank" class="link-dark">Chaitanya Rajasekhar</a><br>
                                <span class="author-description">
                                    Creator of this blog.<br>
                                    <i class="far fa-star"></i>
                                    Apr 14, 2019
                                    <i class="far fa-clock clock"></i>
                                    2 min read
                                </span>					
                            </div>
                        </div>			
                        	
                        
                                                
                        
                        <h1 class="posttitle">MPC - Collision Avoidance using Motion Capture</h1> 
                    </div>

                    
                    
                        <img class="featured-image img-fluid" src="/sundevil-f110car/images/blog/4.jpg" alt="thumbnail for this post">
                    
                    
                    
                    
                    <div class="article-post">
                        <p>In this demo, I have used Model Predictive Controller to avoid a head-on collision for cars trying to swap their position following their given input trajectories. State information is captured using optitrack motion capture system. Motion capture data is subscribed by the controller at 10 Hz using ROS communication stack. The output of the controller i.e. steering angle and throttle values are published to speed controller (VESC) using ROS. The controller runs at 10 Hz.  The dynamics of the car is reduced to the simple kinematic bicycle model which is represented by the equations below. The model predictive control problem is solved using the Interior Point Optimization (Ipopt) method.</p>

<p><img src="../4/model_equations.png" alt="alt text" /></p>

<p>The function f(x) is a 3rd-degree polynomial fit function of the curve from the current location of the car to the goal location using the trajectory information.</p>

<p>The cost function is chosen in such a way that it tries to minimize cross track error, sequential actuation, and use of actuators.</p>

<p><img src="../4/cost.png" alt="alt text" /></p>

<p>Location of the second car is predicted for the next time steps using its current location and velocity information assuming the acceleration is for it zero.</p>

<p>Check out the GitHub repo of the demo <a href="https://github.com/chaitanyarajasekhar/mpc_sundevilf110car_demo">here</a>.</p>

<p>In the first video below, the car tries to avoid the stationary car in its way to reach the goal. The input trajectory is a straight line from its initial location towards the camera passing through the stationary car.</p>

<p><a href="https://www.youtube.com/watch?v=FjxLbX6VHFo"><img src="https://img.youtube.com/vi/FjxLbX6VHFo/0.jpg" alt="alt text" /></a></p>

<p>For better visualization, only one car is using collision avoidance MPC. In the second video below, the car (i.e. car-1) which is away from the screen has collision avoidance MPC. And the other car (i.e. car-2) moves only in a straight line. It can be observed in the video that car-1 successfully avoid the collision.</p>

<p><a href="https://www.youtube.com/watch?v=S9H23x-o2_4"><img src="https://img.youtube.com/vi/S9H23x-o2_4/0.jpg" alt="alt text" /></a></p>

                    </div>
                    
                    
                    <div class="after-post-tags">
                        <ul class="tags">
                        
                        <li>
                        <a href="/sundevil-f110car/tags/rc-car">rc-car</a>
                        </li>
                        
                        <li>
                        <a href="/sundevil-f110car/tags/vesc">vesc</a>
                        </li>
                        
                        <li>
                        <a href="/sundevil-f110car/tags/motion-capture">motion-capture</a>
                        </li>
                        
                        <li>
                        <a href="/sundevil-f110car/tags/mpc">MPC</a>
                        </li>
                        
                        </ul>
                    </div>
                    
                    
                    
                    <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
                    
                    
                        <a class="d-block col-md-6 text-lg-right" href="/sundevil-f110car/blog/vesc_getting_started/">VESC Getting Started &raquo;</a>
                    
                    <div class="clearfix"></div>
                    </div>
                    
                </div>
                
            </div>
        </div>
        
        
    </div>


            </div>
<div class="jumbotron fortags">
	<div class="d-md-flex h-100">
		<div class="col-md-4 transpdark align-self-center text-center h-100">
			<div class="d-md-flex align-items-center justify-content-center h-100">
				<h2 class="d-md-block d-none align-self-center py-1 font-weight-light">Explore <span class="d-none d-md-inline">→</span></h2>
			</div>
		</div>
		<div class="col-md-8 p-5 align-self-center text-center">
			
			<a href="/sundevil-f110car/tags/bldc_tool">bldc_tool</a>
			
			<a href="/sundevil-f110car/tags/demo">demo</a>
			
			<a href="/sundevil-f110car/tags/hardware">hardware</a>
			
			<a href="/sundevil-f110car/tags/motion-capture">motion-capture</a>
			
			<a href="/sundevil-f110car/tags/mpc">mpc</a>
			
			<a href="/sundevil-f110car/tags/razor-imu">razor-imu</a>
			
			<a href="/sundevil-f110car/tags/rc-car">rc-car</a>
			
			<a href="/sundevil-f110car/tags/rp-lidar">rp-lidar</a>
			
			<a href="/sundevil-f110car/tags/sundevil-f1/10car">sundevil-f1/10car</a>
			
			<a href="/sundevil-f110car/tags/tx2">tx2</a>
			
			<a href="/sundevil-f110car/tags/vesc">vesc</a>
			
			<a href="/sundevil-f110car/tags/zed-camera">zed-camera</a>
			
		</div>
	</div>
</div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright Chaitanya Rajasekhar - All rights reserved
            </div>

            
            <div class="col-md-6 col-sm-6 text-center text-lg-right">
                <a target="_blank" href="https://www.wowthemes.net">Mediumish Theme</a> by WowThemes.net
            </div>
        </div>
    </div>
</footer>


        </div>

    
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>    
    
<script src="/sundevil-f110car/js/mediumish.js"></script>

    </body>
</html>
